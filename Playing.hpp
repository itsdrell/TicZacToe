#pragma once
#include "Game/States/AppState.hpp"
#include <vector>
#include "Engine/Core/Tools/StopWatch.hpp"
#include "Game/TicTacToe/Score.hpp"

//===============================================================================================
// Forward Declare
//===============================================================================================
class MatchManager;
class StopWatch;

//===============================================================================================
// Type Defs + Defines
//===============================================================================================


//===============================================================================================
// ENUMS
//===============================================================================================


//===============================================================================================
// Structs
//===============================================================================================


//===============================================================================================
// Classes
//===============================================================================================
class Playing : IAppState
{
public:
	Playing();
	~Playing();

public:
	virtual void Update(float ds = 0.f) override;
	virtual void Render() const override;

public:
	virtual void OnEnter();
	virtual void OnExit();

	void GatherAllScores(std::vector<Score>* outScores);

private:
	void CreateAllMatches();

private:
	MatchManager*	m_mainManager = nullptr;
	std::vector<MatchManager*> m_aiMatches;

	StopWatch		m_gameStartTimer;
	StopWatch		m_gameOverTimer;
	StopWatch		m_changeToGameOverTimer;
	bool			m_startedGameOver = false;
	bool			m_countdownOver = false;
};

//===============================================================================================
// Standalone C Functions
//===============================================================================================


//===============================================================================================
// Externs
//===============================================================================================


//===============================================================================================
// Written by Zachary Bracken : [4/30/2021]
//===============================================================================================